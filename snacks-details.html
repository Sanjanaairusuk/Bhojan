<!DOCTYPE html>
<html lang="en">
<head><!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-5LH23SGN');</script><!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5LH23SGN"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->
<!-- End Google Tag Manager --><!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-ETB0KTMKYH"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-ETB0KTMKYH');
</script>
  <meta charset="utf-8">
  <title>Snack Details - Bhojan</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">

  <style>
    :root { --accent:#ff5a00; --muted:#666; --bg:#fff8f0; }
    *{ box-sizing:border-box; }

    body{
      font-family:'Poppins',sans-serif;
      margin:0;
      background:var(--bg);
      color:#222;
    }

    .container{
      max-width:1000px;
      margin:18px auto;
      padding:18px;
    }

    .back{
      color:var(--accent);
      text-decoration:none;
      font-weight:700;
      display:inline-block;
      margin-bottom:12px;
    }

    .product-card{
      display:flex;
      gap:26px;
      background:#fff;
      padding:22px;
      border-radius:14px;
      box-shadow:0 8px 26px rgba(0,0,0,0.06);
    }

    .media{
      width:420px;
      min-width:260px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .media img{
      width:100%;
      height:360px;
      object-fit:contain;
      border-radius:10px;
    }

    .info{ flex:1; }
    .title{ font-size:26px; font-weight:800; margin-bottom:6px; }
    .meta{ color:var(--muted); margin-bottom:10px; }
    .price{ color:var(--accent); font-weight:900; font-size:26px; margin-bottom:12px; }

    .qtyrow{ display:flex; gap:10px; align-items:center; margin-bottom:12px; }
    .qtybtn{
      width:36px;
      height:36px;
      border-radius:8px;
      border:1px solid #ddd;
      background:#fff;
      cursor:pointer;
      font-size:18px;
    }

    .addbtn{
      background:linear-gradient(135deg,#ff7a00,var(--accent));
      color:#fff;
      padding:12px 18px;
      border-radius:10px;
      border:none;
      cursor:pointer;
      font-weight:700;
      margin-bottom:20px;
    }

    .section{ margin-top:18px; }
    .section h3{ margin:0 0 8px; font-size:18px; font-weight:700; }
    .box{
      background:#fafafa;
      padding:12px;
      border-radius:8px;
      color:#333;
      line-height:1.5;
      white-space:pre-wrap;
      word-break:break-word;
    }

    /* SIMILAR PRODUCTS - MATCH BIG PRODUCT CARD STYLE */
#similarProducts {
  margin-top: 35px;
}

#similarProducts h2 {
  font-size: 22px;
  margin-bottom: 14px;
}

/* Make cards bigger like main product card */
.similar-grid{
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 22px;
}

.similar-card{
  background: #fff;
  border-radius: 14px;
  padding: 22px;
  text-align: center;
  border: none;
  box-shadow: 0 8px 26px rgba(0,0,0,0.06);
  transition: 0.25s;
}

.similar-card:hover{
  transform: translateY(-4px);
  box-shadow: 0 12px 32px rgba(0,0,0,0.10);
}

.similar-card img{
  width: 100%;
  height: 200px;
  object-fit: contain;
  margin-bottom: 12px;
  border-radius: 10px;
}

.similar-name{
  font-weight: 700;
  font-size: 16px;
  margin-bottom: 4px;
  cursor: pointer;
}

.similar-weight{
  color: #777;
  font-size: 14px;
  margin-bottom: 6px;
}

.similar-price{
  font-weight: 800;
  font-size: 18px;
  color: var(--accent);
}

.similar-addbtn{
  margin-top: 14px;
  background: linear-gradient(135deg,#ff7a00,var(--accent));
  color: #fff;
  border: none;
  padding: 10px 18px;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  font-size: 14px;
  width: 100%;
  transition: 0.25s;
}

.similar-addbtn.added{
  background:#26c40f !important;
  transform:scale(1.05);
}


    #toast{
      position:fixed;
      bottom:25px;
      left:50%;
      transform:translateX(-50%);
      background:#222;
      color:#fff;
      padding:12px 20px;
      border-radius:8px;
      font-size:14px;
      opacity:0;
      transition:0.4s;
      z-index:9999;
    }
    #toast.show{ opacity:1; bottom:40px; }
  </style>
</head>

<body>

<div id="toast">Item added to cart</div>

<div class="container">
  <a class="back" href="snacks.html">&larr; Back to Snacks</a>

  <div id="productArea"></div>

  <div id="similarProducts">
    <h2>Similar Products</h2>
    <div class="similar-grid" id="similarGrid"></div>
  </div>
</div>


<script>
/* ------------------------------------------
   SNACKS DATA
   ------------------------------------------ */
const allProducts = [
  {
    name:"Walkers Quavers Grab Bag",
    img:"img/categories/slider-34.webp",
    weight:"34g",
    price:"£1.60",
    category:"crisps",
    ingredients:"Potato starch, sunflower oil, cheese flavour (whey milk, milk powder, MSG), onion powder, paprika, rice flour, soya flour, salt, wheat flour.",
    allergens:"Contains milk, soya, barley, wheat.",
    nutrition:"Per 100g: Energy 536 kcal; Fat 30.8g; Carbs 62.1g; Protein 2.5g; Salt 2.14g."
  },

  {
    name:"Skips Prawn Cocktail Grab Bag",
    img:"img/categories/slider-35.jpg",
    weight:"35g",
    price:"£1.60",
    category:"crisps",
    ingredients:"Tapioca starch, sunflower oil, maize flour, prawn cocktail seasoning.",
    allergens:"Contains crustaceans. May contain milk, gluten, soya.",
    nutrition:"Per 100g: Energy 543 kcal; Fat 32g; Carbs 57g; Protein 4.7g; Salt 2.2g."
  },

  {
    name:"KP Nuts Original Salted Peanuts",
    img:"img/categories/slider-36.webp",
    weight:"30g",
    price:"£1.60",
    category:"nuts",
    ingredients:"Peanuts, sunflower oil, salt.",
    allergens:"Contains peanuts.",
    nutrition:"Per 100g: Energy 614 kcal; Fat 51g; Carbs 5.6g; Protein 30g."
  },

  {
    name:"KP Nuts Dry Roasted Peanuts",
    img:"img/categories/slider-37.webp",
    weight:"30g",
    price:"£1.60",
    category:"nuts",
    ingredients:"Peanuts, seasoning.",
    allergens:"Contains peanuts.",
    nutrition:"Per 100g: Energy 614 kcal; Fat 51g; Protein 30g."
  },

  {
    name:"Penn State Sour Cream and Chive Pretzels",
    img:"img/categories/slider-38.webp",
    weight:"175g",
    price:"£2.25",
    category:"pretzels",
    ingredients:"Wheat flour, dried potato, rapeseed oil, sour cream & chive flavour.",
    allergens:"Contains wheat, milk.",
    nutrition:"Per 100g: Energy 414 kcal; Fat 9.2g; Carbs 71g; Protein 10g."
  },

  {
    name:"Weetabix Breakfast Cereal",
    img:"img/categories/slider-39.webp",
    weight:"12 Pack",
    price:"£3.00",
    category:"cereal",
    ingredients:"Wholegrain wheat, barley malt extract, sugar, salt.",
    allergens:"Contains wheat and barley.",
    nutrition:"Per 100g: Energy 362 kcal; Protein 12g; Carbs 69g; Fat 2g."
  }
];

/* ------------------------------------------
   LOAD PRODUCT FROM STORAGE
------------------------------------------ */
const stored = localStorage.getItem("productDetails");
const product = stored ? JSON.parse(stored) : null;

if (!product) {
  document.getElementById("productArea").innerHTML =
    "<p>Product not found. <a href='snacks.html'>Return</a></p>";
} else {
  renderProduct(product);
  loadSimilar(product);
}

/* ------------------------------------------
   RENDER PRODUCT
------------------------------------------ */
function renderProduct(p){
  const safe = v => v || "";

  document.getElementById("productArea").innerHTML = `
    <div class="product-card">
      <div class="media">
        <img src="${safe(p.img)}">
      </div>

      <div class="info">
        <div class="title">${safe(p.name)}</div>
        <div class="meta">${safe(p.weight)}</div>
        <div class="price">${safe(p.price)}</div>

        <div class="qtyrow">
          <span style="font-weight:700">Quantity</span>
          <button class="qtybtn" id="minusBtn">-</button>
          <div id="qtyVal" style="min-width:36px;text-align:center">1</div>
          <button class="qtybtn" id="plusBtn">+</button>
        </div>

        <button class="addbtn" id="addToCartBtn">Add to cart</button>

        <div class="section">
          <h3>Ingredients</h3>
          <div class="box">${safe(p.ingredients)}</div>
        </div>

        <div class="section">
          <h3>Allergens</h3>
          <div class="box">${safe(p.allergens)}</div>
        </div>

        <div class="section">
          <h3>Nutritional Information</h3>
          <div class="box">${safe(p.nutrition)}</div>
        </div>

        <div class="section">
          <h3>Seller & Delivery</h3>
          <div class="box">Sold by: Shree Hari Marketing LTD
          <br>Delivery: Standard Delivery</div>
        </div>
      </div>
    </div>
  `;

  let qty = 1;
  document.getElementById("plusBtn").onclick = () => {
    qty++; document.getElementById("qtyVal").innerText = qty;
  };
  document.getElementById("minusBtn").onclick = () => {
    if(qty>1){ qty--; document.getElementById("qtyVal").innerText = qty; }
  };

  document.getElementById("addToCartBtn").onclick = () => addToCart(p, qty);
}

/* ------------------------------------------
   SIMILAR PRODUCTS
------------------------------------------ */
function loadSimilar(p){
  const list = allProducts.filter(i =>
    i.category === p.category &&
    i.img !== p.img      // remove identical product
  );

  document.getElementById("similarGrid").innerHTML =
    list.map(item => `
      <div class="similar-card">
        <img src="${item.img}" onclick="openProduct('${item.name}')">
        <div class="similar-name" onclick="openProduct('${item.name}')">${item.name}</div>
        <div class="similar-weight">${item.weight}</div>
        <div class="similar-price">${item.price}</div>

        <button class="similar-addbtn" onclick="addSimilar('${item.name}', this)">
          Add
        </button>
      </div>
    `).join('');
}



/* ADD TO CART */
function priceNumber(s){ return parseFloat(s.replace(/[^\d.]/g,'')); }
function addToCart(p, qty){
  let cart = JSON.parse(localStorage.getItem("cart") || "[]");

  const exist = cart.find(i => i.name === p.name);
  if (exist) exist.quantity += qty;
  else cart.push({ name:p.name, img:p.img, quantity:qty, price:priceNumber(p.price) });

  localStorage.setItem("cart", JSON.stringify(cart));
  showToast();
}

/* ADD SIMILAR */
function addSimilar(name, btn){
  btn.disabled = true;

  const p = allProducts.find(i => i.name === name);
  let cart = JSON.parse(localStorage.getItem("cart") || "[]");

  const exist = cart.find(i => i.name === p.name);
  if (exist) exist.quantity += 1;
  else cart.push({ name:p.name, img:p.img, quantity:1, price:priceNumber(p.price) });

  localStorage.setItem("cart", JSON.stringify(cart));

  btn.classList.add("added");
  btn.innerText = "Added ✓";

  showToast();
  setTimeout(()=>location.href="cart.html",600);
}

/* SHOW TOAST */
function showToast(){
  const t=document.getElementById("toast");
  t.classList.add("show");
  setTimeout(()=>t.classList.remove("show"),1500);
}

/* ------------------------------------------
   OPEN PRODUCT (similar click)
------------------------------------------ */
function openProduct(name){
  const p = allProducts.find(i => i.name === name);
  if (!p) return;

  localStorage.setItem("productDetails", JSON.stringify(p));
  location.href = "product-details.html";
}
</script>

</body>
</html>
